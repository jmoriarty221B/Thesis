function [ret,x0,str]=NASA2(t,x,u,flag);
%NASA2	is the M-file description of the SIMULINK system named NASA2.
%	The block-diagram can be displayed by typing: NASA2.
%
%	SYS=NASA2(T,X,U,FLAG) returns depending on FLAG certain
%	system values given time point, T, current state vector, X,
%	and input vector, U.
%	FLAG is used to indicate the type of output to be returned in SYS.
%
%	Setting FLAG=1 causes NASA2 to return state derivatives, FLAG=2
%	discrete states, FLAG=3 system outputs and FLAG=4 next sample
%	time. For more information and other options see SFUNC.
%
%	Calling NASA2 with a FLAG of zero:
%	[SIZES]=NASA2([],[],[],0),  returns a vector, SIZES, which
%	contains the sizes of the state vector and other parameters.
%		SIZES(1) number of states
%		SIZES(2) number of discrete states
%		SIZES(3) number of outputs
%		SIZES(4) number of inputs.
%	For the definition of other parameters in SIZES, see SFUNC.
%	See also, TRIM, LINMOD, LINSIM, EULER, RK23, RK45, ADAMS, GEAR.

% Note: This M-file is only used for saving graphical information;
%       after the model is loaded into memory an internal model
%       representation is used.

% the system will take on the name of this mfile:
sys = mfilename;
new_system(sys)
simver(1.2)
if(0 == (nargin + nargout))
     set_param(sys,'Location',[16,86,1129,847])
     open_system(sys)
end;
set_param(sys,'algorithm',     'RK-45')
set_param(sys,'Start time',    'min(T)')
set_param(sys,'Stop time',     'max(T)')
set_param(sys,'Min step size', '0.0125')
set_param(sys,'Max step size', '0.0125')
set_param(sys,'Relative error','1e-2')
set_param(sys,'Return vars',   '')

add_block('built-in/Mux',[sys,'/','Mux'])
set_param([sys,'/','Mux'],...
		'hide name',0,...
		'inputs','5',...
		'position',[360,10,405,80])

add_block('built-in/Demux',[sys,'/','Demux'])
set_param([sys,'/','Demux'],...
		'outputs','2',...
		'position',[580,130,620,165])

add_block('built-in/Mux',[sys,'/','Mux2'])
set_param([sys,'/','Mux2'],...
		'hide name',0,...
		'inputs','7',...
		'position',[350,211,405,329])

add_block('built-in/From Workspace',[sys,'/','LCV_command lower limit'])
set_param([sys,'/','LCV_command lower limit'],...
		'hide name',0,...
		'matl_expr','[T,LCVcmd_ll]',...
		'position',[35,39,145,61])

add_block('built-in/From Workspace',[sys,'/','LCV_command upper limit'])
set_param([sys,'/','LCV_command upper limit'],...
		'hide name',0,...
		'matl_expr','[T,LCVcmd_ul]',...
		'position',[35,74,145,96])

add_block('built-in/From Workspace',[sys,'/','alpha (rad)'])
set_param([sys,'/','alpha (rad)'],...
		'hide name',0,...
		'matl_expr','[T,alpha_rad]',...
		'position',[55,107,140,133])

add_block('built-in/From Workspace',[sys,'/','roll_trim (in)'])
set_param([sys,'/','roll_trim (in)'],...
		'hide name',0,...
		'matl_expr','[T,roll_trim]',...
		'position',[45,142,140,168])

add_block('built-in/Mux',[sys,'/','Mux1'])
set_param([sys,'/','Mux1'],...
		'hide name',0,...
		'inputs','3',...
		'position',[355,114,400,186])

add_block('built-in/From Workspace',[sys,'/','beta (rad)'])
set_param([sys,'/','beta (rad)'],...
		'hide name',0,...
		'matl_expr','[T,beta_rad]',...
		'position',[60,645,145,675])

add_block('built-in/From Workspace',[sys,'/','gamma (rad)'])
set_param([sys,'/','gamma (rad)'],...
		'hide name',0,...
		'matl_expr','[T,gamma_rad]',...
		'position',[60,605,145,635])

add_block('built-in/From Workspace',[sys,'/','mu (rad)'])
set_param([sys,'/','mu (rad)'],...
		'hide name',0,...
		'matl_expr','[T,mu_rad]',...
		'position',[60,565,145,595])

add_block('built-in/From Workspace',[sys,'/','vtrue  (fps)'])
set_param([sys,'/','vtrue  (fps)'],...
		'hide name',0,...
		'matl_expr','[T,true_velocity]',...
		'position',[35,523,145,557])

add_block('built-in/From Workspace',[sys,'/','drp (lbs)'])
set_param([sys,'/','drp (lbs)'],...
		'hide name',0,...
		'matl_expr','[T,rudder_pedal]',...
		'position',[30,697,145,723])

add_block('built-in/From Workspace',[sys,'/','yaw_trim (deg)'])
set_param([sys,'/','yaw_trim (deg)'],...
		'hide name',0,...
		'matl_expr','[T,yaw_trim]',...
		'position',[50,732,145,758])

add_block('built-in/From Workspace',[sys,'/','dap (in)'])
set_param([sys,'/','dap (in)'],...
		'hide name',0,...
		'matl_expr','[T,roll_stick]',...
		'position',[35,4,145,26])

add_block('built-in/S-function',[sys,'/','S-function1'])
set_param([sys,'/','S-function1'],...
		'hide name',0,...
		'function name','LCV_fdbk',...
		'position',[445,137,555,163])

add_block('built-in/Mux',[sys,'/','Mux4'])
set_param([sys,'/','Mux4'],...
		'hide name',0,...
		'inputs','2',...
		'position',[345,566,410,624])

add_block('built-in/S-function',[sys,'/','S-function4'])
set_param([sys,'/','S-function4'],...
		'hide name',0,...
		'function name','NCV_cmd',...
		'position',[495,583,580,607])

add_block('built-in/To Workspace',[sys,'/','To Workspace3'])
set_param([sys,'/','To Workspace3'],...
		'hide name',0,...
		'mat-name','NCV_command',...
		'buffer','length(T)',...
		'position',[630,585,730,605])

add_block('built-in/Mux',[sys,'/','Mux5'])
set_param([sys,'/','Mux5'],...
		'hide name',0,...
		'inputs','8',...
		'position',[350,640,415,810])

add_block('built-in/From Workspace',[sys,'/','lateral accel (g)'])
set_param([sys,'/','lateral accel (g)'],...
		'hide name',0,...
		'matl_expr','[T,lateral_accel]',...
		'position',[40,781,145,809])

add_block('built-in/To Workspace',[sys,'/','To Workspace4'])
set_param([sys,'/','To Workspace4'],...
		'hide name',0,...
		'mat-name','NCV_feedback',...
		'buffer','length(T)',...
		'position',[640,710,745,740])

add_block('built-in/S-function',[sys,'/','S-function5'])
set_param([sys,'/','S-function5'],...
		'hide name',0,...
		'function name','NCV_fdbk',...
		'position',[475,712,580,738])

add_block('built-in/From Workspace',[sys,'/',['dynamic_pressure',13,'(psf)']])
set_param([sys,'/',['dynamic_pressure',13,'(psf)']],...
		'hide name',0,...
		'matl_expr','[T,qbar]',...
		'position',[50,474,135,506])

add_block('built-in/S-function',[sys,'/','S-function2'])
set_param([sys,'/','S-function2'],...
		'hide name',0,...
		'function name','MCV_cmd',...
		'position',[460,257,560,283])

add_block('built-in/S-function',[sys,'/','S-function'])
set_param([sys,'/','S-function'],...
		'hide name',0,...
		'function name','LCV_cmd',...
		'position',[455,34,560,56])

add_block('built-in/To Workspace',[sys,'/','To Workspace'])
set_param([sys,'/','To Workspace'],...
		'hide name',0,...
		'mat-name','LCV_command',...
		'buffer','length(T)',...
		'position',[625,65,725,85])

add_block('built-in/Mux',[sys,'/','Mux10'])
set_param([sys,'/','Mux10'],...
		'hide name',0,...
		'inputs','3',...
		'position',[980,201,1020,269])

add_block('built-in/To Workspace',[sys,'/','p_stability (rad//s)'])
set_param([sys,'/','p_stability (rad//s)'],...
		'hide name',0,...
		'mat-name','LCV_feedback',...
		'buffer','length(T)',...
		'position',[655,174,770,206])

add_block('built-in/To Workspace',[sys,'/','To Workspace1'])
set_param([sys,'/','To Workspace1'],...
		'hide name',0,...
		'mat-name','MCV_command',...
		'buffer','length(T)',...
		'position',[620,305,715,325])

add_block('built-in/From Workspace',[sys,'/','pitch_rate (rad//s)'])
set_param([sys,'/','pitch_rate (rad//s)'],...
		'hide name',0,...
		'matl_expr','[T,q_rps]',...
		'position',[40,283,140,307])

add_block('built-in/Mux',[sys,'/','Mux7'])
set_param([sys,'/','Mux7'],...
		'hide name',0,...
		'inputs','3',...
		'position',[980,111,1020,179])

add_block('built-in/Mux',[sys,'/','Mux8'])
set_param([sys,'/','Mux8'],...
		'hide name',0,...
		'inputs','3',...
		'position',[980,301,1020,369])

add_block('built-in/From Workspace',[sys,'/','pitch_rate (rad//s)9'])
set_param([sys,'/','pitch_rate (rad//s)9'],...
		'hide name',0,...
		'matl_expr','[T,LCV_err_aw]',...
		'position',[820,298,935,322])

add_block('built-in/From Workspace',[sys,'/','pitch_rate (rad//s)10'])
set_param([sys,'/','pitch_rate (rad//s)10'],...
		'hide name',0,...
		'matl_expr','[T,NCV_err_aw]',...
		'position',[820,348,935,372])

add_block('built-in/From Workspace',[sys,'/','pitch_rate (rad//s)11'])
set_param([sys,'/','pitch_rate (rad//s)11'],...
		'hide name',0,...
		'matl_expr','[T,MCV_err_aw]',...
		'position',[820,323,935,347])

add_block('built-in/From Workspace',[sys,'/','pitch_rate (rad//s)12'])
set_param([sys,'/','pitch_rate (rad//s)12'],...
		'hide name',0,...
		'matl_expr','[T dal del der dr dl dm dn]',...
		'position',[850,382,1020,408])

add_block('built-in/Mux',[sys,'/','Mux9'])
set_param([sys,'/','Mux9'],...
		'hide name',0,...
		'inputs','[7 7 5 33]',...
		'position',[1205,379,1240,516])

add_block('built-in/MATLAB Fcn',[sys,'/','HARV_model'])
set_param([sys,'/','HARV_model'],...
		'MATLAB Fcn','HARV_model',...
		'Output Width','3',...
		'position',[1265,435,1340,465])

add_block('built-in/From Workspace',[sys,'/','From Workspace3'])
set_param([sys,'/','From Workspace3'],...
		'hide name',0,...
		'matl_expr','[T p_rps q_rps r_rps true_velocity alpha_rad beta_rad qbar]',...
		'position',[830,417,1180,443])

add_block('built-in/Gain',[sys,'/','Gain'])
set_param([sys,'/','Gain'],...
		'hide name',0,...
		'Gain','0.0',...
		'position',[1100,381,1150,409])

add_block('built-in/Demux',[sys,'/','Demux2'])
set_param([sys,'/','Demux2'],...
		'hide name',0,...
		'outputs','3',...
		'position',[1410,434,1450,466])

add_block('built-in/To Workspace',[sys,'/','To Workspace8'])
set_param([sys,'/','To Workspace8'],...
		'hide name',0,...
		'mat-name','MCV_DOT_0',...
		'buffer','length(T)',...
		'position',[1515,440,1640,460])

add_block('built-in/To Workspace',[sys,'/','To Workspace9'])
set_param([sys,'/','To Workspace9'],...
		'hide name',0,...
		'mat-name','NCV_DOT_0',...
		'buffer','length(T)',...
		'position',[1515,470,1640,490])

add_block('built-in/To Workspace',[sys,'/','To Workspace10'])
set_param([sys,'/','To Workspace10'],...
		'hide name',0,...
		'mat-name','LCV_DOT_0',...
		'buffer','length(T)',...
		'position',[1515,410,1640,430])

add_block('built-in/MATLAB Fcn',[sys,'/','HARV_aero'])
set_param([sys,'/','HARV_aero'],...
		'MATLAB Fcn','HARV_aero',...
		'Output Width','33',...
		'position',[1075,485,1150,515])

add_block('built-in/From Workspace',[sys,'/','From Workspace1'])
set_param([sys,'/','From Workspace1'],...
		'hide name',0,...
		'matl_expr','[T,alp_tlu]',...
		'position',[935,487,1025,513])

add_block('built-in/From Workspace',[sys,'/','From Workspace2'])
set_param([sys,'/','From Workspace2'],...
		'hide name',0,...
		'matl_expr','[T rho Tg Tn tha_rad phi_rad]',...
		'position',[860,454,1045,476])

add_block('built-in/To Workspace',[sys,'/','To Workspace5'])
set_param([sys,'/','To Workspace5'],...
		'hide name',0,...
		'mat-name','NCV_error_dot',...
		'buffer','length(T)',...
		'position',[1415,270,1520,300])

add_block('built-in/To Workspace',[sys,'/','To Workspace6'])
set_param([sys,'/','To Workspace6'],...
		'hide name',0,...
		'mat-name','MCV_error_dot',...
		'buffer','length(T)',...
		'position',[1415,230,1520,260])

add_block('built-in/To Workspace',[sys,'/','To Workspace7'])
set_param([sys,'/','To Workspace7'],...
		'hide name',0,...
		'mat-name','LCV_error_dot',...
		'buffer','length(T)',...
		'position',[1415,190,1520,220])

add_block('built-in/Demux',[sys,'/','Demux1'])
set_param([sys,'/','Demux1'],...
		'hide name',0,...
		'outputs','3',...
		'position',[1310,227,1350,263])

add_block('built-in/S-function',[sys,'/','S-function6'])
set_param([sys,'/','S-function6'],...
		'hide name',0,...
		'function name','desired_dynamics',...
		'position',[1160,232,1285,258])

add_block('built-in/Mux',[sys,'/','Mux6'])
set_param([sys,'/','Mux6'],...
		'hide name',0,...
		'inputs','[3 3 3 3]',...
		'position',[1085,207,1125,278])

add_block('built-in/From Workspace',[sys,'/','roll_rate (rad//s)'])
set_param([sys,'/','roll_rate (rad//s)'],...
		'hide name',0,...
		'matl_expr','[T,p_rps]',...
		'position',[60,186,135,214])

add_block('built-in/From Workspace',[sys,'/','yaw_rate (rad//s)'])
set_param([sys,'/','yaw_rate (rad//s)'],...
		'hide name',0,...
		'matl_expr','[T,r_rps]',...
		'position',[60,221,135,249])

add_block('built-in/Mux',[sys,'/','Mux3'])
set_param([sys,'/','Mux3'],...
		'hide name',0,...
		'inputs','8',...
		'position',[345,419,420,546])

add_block('built-in/S-function',[sys,'/','S-function3'])
set_param([sys,'/','S-function3'],...
		'hide name',0,...
		'function name','MCV_fdbk',...
		'position',[470,472,575,498])

add_block('built-in/To Workspace',[sys,'/','To Workspace2'])
set_param([sys,'/','To Workspace2'],...
		'hide name',0,...
		'mat-name','MCV_feedback',...
		'buffer','length(T)',...
		'position',[635,466,735,504])

add_block('built-in/S-function',[sys,'/','S-function7'])
set_param([sys,'/','S-function7'],...
		'hide name',0,...
		'function name','qdot_alp_lim',...
		'position',[345,367,450,393])

add_block('built-in/From Workspace',[sys,'/','alpha_dot (rad//s)'])
set_param([sys,'/','alpha_dot (rad//s)'],...
		'hide name',0,...
		'matl_expr','[T,alpdot_rps]',...
		'position',[40,313,140,337])

add_block('built-in/From Workspace',[sys,'/','dep (in)'])
set_param([sys,'/','dep (in)'],...
		'hide name',0,...
		'matl_expr','[T,pitch_stick]',...
		'position',[30,349,140,371])

add_block('built-in/From Workspace',[sys,'/','pitch_trim (deg//s)'])
set_param([sys,'/','pitch_trim (deg//s)'],...
		'hide name',0,...
		'matl_expr','[T,pitch_trim]',...
		'position',[40,382,135,408])

add_block('built-in/From Workspace',[sys,'/','From Workspace'])
set_param([sys,'/','From Workspace'],...
		'hide name',0,...
		'matl_expr','[T p_rps r_rps qbar Tg]',...
		'position',[15,413,150,437])
add_line(sys,[410,45;445,45])
add_line(sys,[145,155;260,75;350,75])
add_line(sys,[145,120;235,60;350,60])
add_line(sys,[150,85;215,45;350,45])
add_line(sys,[150,50;195,30;350,30])
add_line(sys,[150,15;350,15])
add_line(sys,[140,235;250,150;345,150])
add_line(sys,[140,200;235,125;345,125])
add_line(sys,[405,150;435,150])
add_line(sys,[560,150;570,150])
add_line(sys,[140,395;240,315;340,315])
add_line(sys,[145,360;225,300;340,300])
add_line(sys,[145,325;220,285;340,285])
add_line(sys,[410,270;450,270])
add_line(sys,[565,270;565,315;610,315])
add_line(sys,[145,295;175,225;340,225])
add_line(sys,[150,660;235,520;335,520])
add_line(sys,[150,620;230,505;335,505])
add_line(sys,[150,580;220,490;335,490])
add_line(sys,[150,540;220,475;335,475])
add_line(sys,[140,490;180,445;335,445])
add_line(sys,[580,485;625,485])
add_line(sys,[425,485;460,485])
add_line(sys,[190,90;190,460;335,460])
add_line(sys,[190,175;345,175])
add_line(sys,[285,225;285,430;335,430])
add_line(sys,[150,710;220,580;335,580])
add_line(sys,[150,745;230,610;335,610])
add_line(sys,[585,595;620,595])
add_line(sys,[415,595;485,595])
add_line(sys,[150,795;340,795])
add_line(sys,[585,725;630,725])
add_line(sys,[420,725;465,725])
add_line(sys,[191,502;220,675;340,675])
add_line(sys,[181,541;205,695;340,695])
add_line(sys,[166,596;190,715;340,715])
add_line(sys,[275,445;275,755;340,755])
add_line(sys,[245,580;245,775;340,775])
add_line(sys,[190,255;340,255])
add_line(sys,[595,485;595,335;305,335;305,270;340,270])
add_line(sys,[625,155;780,155;780,630;320,630;320,655;340,655])
add_line(sys,[155,651;180,735;340,735])
add_line(sys,[940,310;950,315;970,315])
add_line(sys,[940,360;950,355;970,355])
add_line(sys,[940,335;970,335])
add_line(sys,[1025,235;1075,235])
add_line(sys,[1025,145;1075,220])
add_line(sys,[1130,245;1150,245])
add_line(sys,[1355,255;1405,285])
add_line(sys,[1355,245;1405,245])
add_line(sys,[1355,235;1405,205])
add_line(sys,[1290,245;1300,245])
add_line(sys,[565,45;930,45;930,125;970,125])
add_line(sys,[600,45;600,75;615,75])
add_line(sys,[625,140;875,140;875,215;970,215])
add_line(sys,[645,140;645,110;260,110;260,535;335,535])
add_line(sys,[645,140;645,190])
add_line(sys,[565,270;905,270;905,145;970,145])
add_line(sys,[610,485;610,370;740,370;740,235;970,235])
add_line(sys,[610,725;610,650;810,650;810,255;970,255])
add_line(sys,[610,595;610,545;795,545;795,165;970,165])
add_line(sys,[1025,335;1045,250;1075,250])
add_line(sys,[1245,450;1255,450])
add_line(sys,[1030,500;1065,500])
add_line(sys,[1345,450;1390,450;1390,330;1065,330;1065,265;1075,265])
add_line(sys,[1155,500;1195,500])
add_line(sys,[1050,465;1195,465])
add_line(sys,[1185,430;1195,430])
add_line(sys,[1025,395;1090,395])
add_line(sys,[1155,395;1195,395])
add_line(sys,[1455,460;1505,480])
add_line(sys,[1455,450;1505,450])
add_line(sys,[1455,440;1505,420])
add_line(sys,[1390,450;1400,450])
add_line(sys,[155,425;235,380;335,380])
add_line(sys,[455,380;490,380;490,355;295,355;295,240;340,240])

% Return any arguments.
if (nargin | nargout)
	% Must use feval here to access system in memory
	if (nargin > 3)
		if (flag == 0)
			eval(['[ret,x0,str]=',sys,'(t,x,u,flag);'])
		else
			eval(['ret =', sys,'(t,x,u,flag);'])
		end
	else
		[ret,x0,str] = feval(sys);
	end
end
